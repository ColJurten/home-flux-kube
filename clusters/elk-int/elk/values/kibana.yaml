# Official Elastic Kibana chart
replicas: 1

# Use official Kibana image
image: "docker.elastic.co/kibana/kibana"
imageTag: "8.15.0"
imagePullPolicy: "IfNotPresent"

# Point Kibana to Elasticsearch (HTTP, not HTTPS)
elasticsearchHosts: "http://elastic-master:9200"

# Disable TLS/certificate mounting completely (security is disabled on ES)
# The chart requires a valid secret name even if not used - use dummy secret
elasticsearchCertificateSecret: "elasticsearch-master-certs"
elasticsearchCertificateAuthoritiesFile: ""
elasticsearchCredentialSecret: ""

# Disable secret mounts (prevents mounting non-existent elasticsearch-certs)
secretMounts: []

# Disable extra volumes that might reference certificates
extraVolumes: []
extraVolumeMounts: []

# Override the SSL env var that the chart sets by default
extraEnvs:
  - name: "NODE_OPTIONS"
    value: "--max-old-space-size=1800"
  - name: ELASTICSEARCH_SSL_CERTIFICATEAUTHORITIES
    value: ""
  - name: ELASTICSEARCH_SSL_VERIFICATIONMODE
    value: "none"

protocol: http

# Kibana configuration
kibanaConfig:
  kibana.yml: |
    server.host: "0.0.0.0"
    elasticsearch.hosts: ["http://elastic-master:9200"]
    elasticsearch.ssl.verificationMode: none

# Service configuration
service:
  type: ClusterIP
  port: 5601

# Dev-friendly resources
resources:
  requests:
    cpu: "100m"
    memory: "256Mi"
  limits:
    memory: "512Mi"

# Health check path
healthCheckPath: "/app/kibana"
