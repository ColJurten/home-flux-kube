# Official Elastic chart - single node dev setup
clusterName: "elastic"

# Single node configuration
replicas: 1
minimumMasterNodes: 1

# Disable initial master nodes (conflicts with single-node discovery)
clusterInitialMasterNodes: ""

# Use official Elasticsearch image
image: "docker.elastic.co/elasticsearch/elasticsearch"
imageTag: "8.15.0"
imagePullPolicy: "IfNotPresent"

# Disable security for dev environment
esConfig:
  elasticsearch.yml: |
    xpack.security.enabled: false
    xpack.security.enrollment.enabled: false
    xpack.security.http.ssl.enabled: false
    xpack.security.transport.ssl.enabled: false
    discovery.type: single-node

# Extra environment variables to ensure single-node mode
extraEnvs:
- name: cluster.initial_master_nodes
  value: ""

# Keep resources low for local clusters
resources:
  requests:
    cpu: "200m"
    memory: "512Mi"
  limits:
    memory: "1Gi"

# Avoid persistence for disposable testing
persistence:
  enabled: false

# Service configuration
service:
  type: ClusterIP
  httpPortName: http
  transportPortName: transport

# Disable antiAffinity for single-node
antiAffinity: "soft"

# Protocol (http since security is disabled)
protocol: http
