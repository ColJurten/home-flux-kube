# Official Elastic chart - single node dev setup
clusterName: "elastic"

# Single node configuration
replicas: 1

# Use official Elasticsearch image
image: "docker.elastic.co/elasticsearch/elasticsearch"
imageTag: "8.15.0"
imagePullPolicy: "IfNotPresent"

# Set single-node discovery via environment variable (overrides chart defaults)
extraEnvs:
- name: discovery.type
  value: single-node
- name: xpack.security.enabled
  value: "false"

# Disable security for dev environment
esConfig:
  elasticsearch.yml: |
    xpack.security.enabled: false
    xpack.security.enrollment.enabled: false
    xpack.security.http.ssl.enabled: false
    xpack.security.transport.ssl.enabled: false

# Disable automatic certificate creation (required for 8.x chart)
createCert: false
secret:
  enabled: false

# Clear discovery seed hosts for true single-node operation
discovery:
  type: single-node

# Disable cluster.initial_master_nodes (incompatible with single-node)
clusterInitialMasterNodes: []

# Keep resources low for local clusters
resources:
  requests:
    cpu: "200m"
    memory: "512Mi"
  limits:
    memory: "1Gi"

# Avoid persistence for disposable testing
persistence:
  enabled: false

# Service configuration
service:
  type: ClusterIP
  httpPortName: http
  transportPortName: transport

# Disable antiAffinity for single-node
antiAffinity: "soft"

# Protocol (http since security is disabled)
protocol: http
