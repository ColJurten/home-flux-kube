# Official Elastic chart - single node dev setup
clusterName: "elastic"

# Single node configuration - THIS IS THE KEY SETTING
replicas: 1
singleNode: true

# Use official Elasticsearch image
image: "docker.elastic.co/elasticsearch/elasticsearch"
imageTag: "8.15.0"
imagePullPolicy: "IfNotPresent"

# Set security disabled via environment variable (ensures it's set before config is read)
# ELASTIC_PASSWORD is needed for the readiness probe even with security disabled
extraEnvs:
- name: xpack.security.enabled
  value: "false"
- name: ELASTIC_PASSWORD
  value: "dummy"

# Disable security for dev environment
esConfig:
  elasticsearch.yml: |
    xpack.security.enabled: false
    xpack.security.enrollment.enabled: false
    xpack.security.http.ssl.enabled: false
    xpack.security.transport.ssl.enabled: false
    discovery.seed_hosts: []

# Disable automatic certificate creation (required for 8.x chart)
createCert: false
secret:
  enabled: false

# Keep resources low for local clusters
resources:
  requests:
    cpu: "200m"
    memory: "512Mi"
  limits:
    cpu: "1"
    memory: "1536Mi"

# Avoid persistence for disposable testing
persistence:
  enabled: false

# Service configuration
service:
  type: ClusterIP
  httpPortName: http
  transportPortName: transport

# Disable antiAffinity for single-node
antiAffinity: "soft"

# Protocol (http since security is disabled)
protocol: http
